import sliders from"./sliders.js";const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),headerNav=document.querySelector(".header__nav"),wrapper=document.querySelector(".wrapper"),header=document.querySelector(".header");gsap.registerPlugin(ScrollTrigger);const imageAspectRatio=document.querySelectorAll(".image-aspect-ratio, figure");imageAspectRatio.forEach(e=>{const t=e.querySelector("img"),r=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==r.position&&e.style.setProperty("--padding-aspect-ratio",Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")});const getDeviceType=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};let headerNavTimeout;body.addEventListener("click",(function(e){var t;t=".header__burger",e.target.closest(t)&&(menu.forEach(e=>{e.classList.toggle("is-mobile-menu-active")}),clearTimeout(headerNavTimeout),headerNav.style.setProperty("--transition","transform .3s ease"),headerNavTimeout=setTimeout(()=>{headerNav.style.removeProperty("--transition")},300))}));let windowSize,resizeCheck={};function resizeCheckFunc(e,t,r){windowSize<=e&&(1==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&0!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!1,r()),windowSize>=e&&(0==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&1!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!0,t())}let workStagesGallery=[];const telLabels=document.querySelectorAll(".tel-input-label");let forms=document.querySelectorAll("form");function resize(){windowSize=window.innerWidth,telLabels.forEach(e=>{e.style.setProperty("--width",e.offsetWidth+"px")}),html.style.setProperty("--height-header",header.offsetHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),windowSize=window.innerWidth,forms.forEach(e=>{e.style.setProperty("--width-form",e.offsetWidth+"px")})}function getCoords(e){let t=e.getBoundingClientRect();return{top:t.top+window.scrollY,right:t.right+window.scrollX,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX}}resize(),window.onresize=resize,sliders(windowSize);const startButtons=document.querySelectorAll(".start-button");let scrollSmoother,scrollButtonCheck=!1,headerOnTop=!1;const smoothContent=document.querySelector("#smooth-content");function scroll(){if(windowSize<=992){let e=Math.abs(wrapper.getBoundingClientRect().top);e>100&&!headerOnTop?(headerOnTop=!0,header.classList.add("on-scroll")):e<=100&&headerOnTop&&(headerOnTop=!1,header.classList.remove("on-scroll")),window.scrollY+window.innerHeight>wrapper.offsetHeight-300&&!scrollButtonCheck?(scrollButtonCheck=!0,startButtons.forEach(e=>{e.classList.add("is-hidden")})):window.scrollY+window.innerHeight<wrapper.offsetHeight-300&&scrollButtonCheck&&(scrollButtonCheck=!1,startButtons.forEach(e=>{e.classList.remove("is-hidden")}))}}function headerScroll(e){let t,r,s=document.querySelector(".header"),o=getCoords(s),a=[!0,!0],l=!1,i=[0,0],n="";function c(){i[0]=o.top,o=getCoords(s),i[1]=o.top,l||(l=!0,t=o.top+300,r=o.top-50),i[0]>i[1]?n="up":i[0]<i[1]&&(n="down"),"down"==n&&(r=o.top-50),"up"==n&&(t=o.top+300),r>=o.top&&a[0]&&(a[0]=!1,a[1]=!0,s.classList.remove("is-hide")),t<=o.top&&a[1]&&(a[1]=!1,a[0]=!0,s.classList.add("is-hide"))}c(),window.addEventListener("scroll",c)}scroll(),window.addEventListener("scroll",scroll),headerScroll(),ScrollTrigger.config({ignoreMobileResize:!0}),document.querySelectorAll(".split-text p").forEach(e=>{new SplitType(e,{types:"lines, word"})}),document.querySelectorAll(".split-lines").forEach(e=>{let t=new SplitType(e,{types:"lines"});Array.from(t.lines).forEach(e=>{let t;t=e.cloneNode(!0),t.classList.remove("line"),t.classList.add("line-inner"),e.innerHTML="",e.append(t)})}),document.querySelectorAll(".split-text").forEach(e=>{gsap.set(e.querySelectorAll(".line"),{"--progress":"-20%","--progress-2":"0%"});const t=gsap.to(e.querySelectorAll(".line"),{"--progress":"100%","--progress-2":"120%",stagger:1,duration:1.5,immediateRender:!1,paused:!0});ScrollTrigger.create({trigger:e.closest("section"),scrub:1,start:"top +=50%",end:"+120% bottom",animation:t})});const animMedia=gsap.matchMedia();function validateEmail(e){return/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)}function validateName(e){return/\d/.test(e)}animMedia.add("(min-width: 992px)",()=>{const e=new Lenis;e.on("scroll",e=>{let t=e.animatedScroll;t>100&&!headerOnTop?(headerOnTop=!0,header.classList.add("on-scroll")):t<=100&&headerOnTop&&(headerOnTop=!1,header.classList.remove("on-scroll")),t+window.innerHeight>wrapper.offsetHeight-300&&!scrollButtonCheck?(scrollButtonCheck=!0,startButtons.forEach(e=>{e.classList.add("is-hidden")})):t+window.innerHeight<wrapper.offsetHeight-300&&scrollButtonCheck&&(scrollButtonCheck=!1,startButtons.forEach(e=>{e.classList.remove("is-hidden")}))}),document.querySelectorAll(".page-hero__scroll_link").forEach(t=>{t.addEventListener("click",(function(r){r.preventDefault(),e.scrollTo(t.offsetTop+t.offsetHeight+250)}))}),e.on("scroll",ScrollTrigger.update),gsap.ticker.add(t=>{e.raf(1e3*t)}),gsap.ticker.lagSmoothing(0),requestAnimationFrame((function t(r){e.raf(r),requestAnimationFrame(t)})),document.querySelectorAll(".services-section__wrapper").forEach(e=>{let t=0;e.querySelector(".services-section__list").querySelectorAll(".services-section__card").forEach(e=>{t+=e.offsetWidth}),gsap.to(e.querySelector(".services-section__list"),{transform:`translate3d(-${e.scrollWidth-windowSize}px,0,0.003px)`,ease:"none",scrollTrigger:{trigger:e.closest("section"),scrub:!0,pin:!0,start:"center center",end:t+" center"}})});let t=!0,r=!1,s=[];document.querySelectorAll("[data-change-theme-to]").forEach((e,t)=>{let o,a,l=!1,i=document.querySelectorAll("[data-change-theme-to]")[t],n=t-1!=-1&&document.querySelectorAll("[data-change-theme-to]")[t-1],c=gsap.timeline();s.push(c),"light"==i.dataset.changeThemeTo?(gsap.set(html,{"--background-color":"rgba(11,11,12,1)","--theme-color-1":"rgb(255,255,255)","--theme-color-1-reverse":"rgb(23,23,24)"}),c.to(html,{"--background-color":"rgba(255,255,255,1)","--theme-color-1":"rgb(23,23,24)","--theme-color-1-reverse":"rgb(255,255,255)"})):(gsap.set(html,{"--background-color":"rgb(255,255,255)","--theme-color-1":"rgb(23,23,24)","--theme-color-1-reverse":"rgb(255,255,255)"}),c.to(html,{"--background-color":"rgb(11,11,12)","--theme-color-1":"rgb(255,255,255)","--theme-color-1-reverse":"rgb(23,23,24)"})),c.pause(),i.hasAttribute("data-change-theme-on-top")?(o="+100 bottom",a="+500 bottom"):(o=`-${window.innerHeight/7} 15%`,a=`+${window.innerHeight/3} 15%`);ScrollTrigger.create({trigger:i,scrub:1,start:o,end:a,onUpdate:e=>{c.progress(e.progress),0==t&&1==e.progress&&(r=!0),e.progress>=.3&&!l?(l=!0,"light"==i.dataset.changeThemeTo?(header.classList.add("is-light"),header.classList.remove("is-dark"),body.classList.remove("is-dark"),html.style.setProperty("--theme-color-2","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.add("is-reverse-theme")})):(header.classList.remove("is-light"),header.classList.add("is-dark"),body.classList.add("is-dark"),html.style.setProperty("--theme-color-2","#FFF"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.remove("is-reverse-theme")}))):e.progress<.3&&l&&(l=!1,header.classList.remove("is-dark"),n?"light"==n.dataset.changeThemeTo?(t-1==-1?header.classList.remove("is-light"):header.classList.add("is-light"),t-1==-1?header.classList.add("is-dark"):header.classList.remove("is-dark"),header.classList.contains("is-dark")?body.classList.add("is-dark"):body.classList.remove("is-dark"),html.style.setProperty("--theme-color-2","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.add("is-reverse-theme")})):(t-1==-1?header.classList.add("is-light"):header.classList.remove("is-light"),t-1==-1?header.classList.remove("is-dark"):header.classList.add("is-dark"),header.classList.contains("is-dark")?body.classList.add("is-dark"):body.classList.remove("is-dark"),html.style.setProperty("--theme-color-2","#FFF"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.remove("is-reverse-theme")})):(header.classList.remove("is-light"),html.style.setProperty("--theme-color-2","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.remove("is-reverse-theme")})))}})}),r||(html.classList.contains("is-light-start")?(header.classList.add("is-light"),html.style.setProperty("--theme-color-2","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.add("is-reverse-theme")})):(body.classList.add("is-dark"),gsap.set(html,{"--background-color":"rgba(11,11,12,1)","--theme-color-1":"rgb(255,255,255)","--theme-color-1-reverse":"rgb(23,23,24)"}))),t=!1}),animMedia.add("(max-width: 991px)",()=>{let e=!0,t=!1,r=[];document.querySelectorAll(".page-hero__scroll_link").forEach(e=>{e.addEventListener("click",(function(t){t.preventDefault(),window.scrollTo({left:0,top:e.offsetTop+e.offsetHeight+150,behavior:"smooth"})}))}),document.querySelectorAll("[data-change-theme-to]").forEach((e,s)=>{let o,a,l,i=!1,n=document.querySelectorAll("[data-change-theme-to]")[s],c=s-1!=-1&&document.querySelectorAll("[data-change-theme-to]")[s-1],d=gsap.timeline();r.push(d),o="light"==n.dataset.changeThemeTo?gsap.fromTo(html,{immediateRender:!1,paused:!0,"--background-color":"rgba(11,11,12,1)","--theme-color-1":"rgb(255,255,255)","--theme-color-1-reverse":"rgb(23,23,24)"},{"--background-color":"rgba(255,255,255,1)","--theme-color-1":"rgb(23,23,24)","--theme-color-1-reverse":"rgb(255,255,255)"}):gsap.fromTo(html,{immediateRender:!1,paused:!0,"--background-color":"rgb(255,255,255)","--theme-color-1":"rgb(23,23,24)","--theme-color-1-reverse":"rgb(255,255,255)"},{"--background-color":"rgb(11,11,12)","--theme-color-1":"rgb(255,255,255)","--theme-color-1-reverse":"rgb(23,23,24)"}),d.pause(),n.hasAttribute("data-change-theme-on-top")?(a="+100 bottom",l="+500 bottom"):(a=`-${window.innerHeight/7} 15%`,l=`+${window.innerHeight/3} 15%`);let h=0;ScrollTrigger.create({trigger:n,scrub:1,start:a,end:l,animation:o,onUpdate:e=>{h=e.progress,0==s&&1==e.progress&&(t=!0),e.progress>=.3&&!i?(i=!0,"light"==n.dataset.changeThemeTo?(header.classList.add("is-light"),header.classList.remove("is-dark"),body.classList.remove("is-dark"),html.style.setProperty("--theme-color-2","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.add("is-reverse-theme")})):(header.classList.remove("is-light"),header.classList.add("is-dark"),body.classList.add("is-dark"),html.style.setProperty("--theme-color-2","#FFF"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.remove("is-reverse-theme")}))):e.progress<.3&&i&&(i=!1,c?"light"==c.dataset.changeThemeTo?(s-1==-1?header.classList.remove("is-light"):header.classList.add("is-light"),s-1==-1?header.classList.add("is-dark"):header.classList.remove("is-dark"),header.classList.contains("is-dark")?body.classList.add("is-dark"):body.classList.remove("is-dark"),html.style.setProperty("--theme-color-2","#FFF"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.add("is-reverse-theme")})):(s-1==-1?header.classList.add("is-light"):header.classList.remove("is-light"),s-1==-1?header.classList.remove("is-dark"):header.classList.add("is-dark"),header.classList.contains("is-dark")?body.classList.add("is-dark"):body.classList.remove("is-dark"),html.style.setProperty("--theme-color-2","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.remove("is-reverse-theme")})):(header.classList.remove("is-light"),header.classList.add("is-dark"),body.classList.add("is-dark"),html.style.setProperty("--theme-color-2","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.remove("is-reverse-theme")})))}})}),t||(html.classList.contains("is-light-start")?(header.classList.add("is-light"),html.style.setProperty("--theme-color-2","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.add("is-reverse-theme")})):(body.classList.add("is-dark"),gsap.set(html,{"--background-color":"rgba(11,11,12,1)","--theme-color-1":"rgb(255,255,255)","--theme-color-1-reverse":"rgb(23,23,24)"}))),e=!1}),window.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("[data-animation]").forEach(e=>{if("split-fade-up"==e.dataset.animation){let t=new SplitType(e,{types:"lines"});Array.from(t.lines).forEach(e=>{e.innerHTML=`<div class="line-inner">${e.innerHTML}</div>`}),gsap.set(e.querySelectorAll(".line-inner"),{transform:"translate(0,100%)",opacity:0})}e.dataset.animationDelay&&e.style.setProperty("--delay",e.dataset.animationDelay+"s");const t=!!e.dataset.animationAnchor&&document.querySelector(e.dataset.animationAnchor);"lines-up"==e.dataset.animation&&document.querySelectorAll(".split-lines").forEach(e=>{let r=new SplitType(e,{types:"lines"});Array.from(r.lines).forEach(e=>{let t;t=e.cloneNode(!0),t.classList.remove("line"),t.classList.add("line-inner"),e.innerHTML="",e.append(t)}),gsap.set(e.querySelectorAll(".line"),{"--transform":"translate3d(0,100%,0.0001px)"}),gsap.to(e.querySelectorAll(".line"),{"--transform":"translate3d(0,0,0.0001px)",stagger:.15,delay:e.dataset.animationDelay?e.dataset.animationDelay:0,scrollTrigger:{trigger:t||e}})});const r=new IntersectionObserver((function(t){t.forEach(t=>{t.isIntersecting?e.classList.contains("lazy")?"loaded"==e.dataset.llStatus?(e.classList.add("is-animated"),"VIDEO"==e.nodeName&&e.play()):e.classList.add("is-animated-lazy"):(e.classList.add("is-animated"),"split-fade-up"==e.dataset.animation&&e.querySelector(".line")&&gsap.to(e.querySelectorAll(".line-inner"),{delay:e.dataset.animationDelay?Number(e.dataset.animationDelay):0,opacity:1,stagger:.25,transform:"translate(0,0)"})):e.hasAttribute("data-animation-once")||(e.classList.remove("is-animated"),e.classList.remove("is-animated-lazy"),"VIDEO"==e.nodeName&&e.pause(),"split-fade-up"==e.dataset.animation&&e.querySelector(".line")&&gsap.set(e.querySelectorAll(".line-inner"),{transform:"translate(0,75%)",opacity:0}))})}));t?r.observe(t):r.observe(e)})})),document.querySelectorAll(".video").forEach(e=>{e.querySelector(".video__element");const t=e.querySelector(".video__wrapper");gsap.to(t,{width:"100%",scrollTrigger:{trigger:t,scrub:!0,start:"top bottom",end:"bottom bottom"}})}),document.querySelectorAll(".form input").forEach(e=>{("first-name"==e.name||"last-name"==e.name&&"text"==e.type)&&e.addEventListener("blur",(function(t){e.value&&(validateName(e.value)?(e.closest("label").classList.add("is-error"),e.closest("label").classList.remove("is-valid")):(e.closest("label").classList.remove("is-error"),""!=e.value&&e.closest("label").classList.add("is-valid")))})),"email"==e.type&&e.addEventListener("blur",(function(t){e.value&&(validateEmail(e.value)?(e.closest("label").classList.remove("is-error"),""!=e.value&&e.closest("label").classList.add("is-valid")):(e.closest("label").classList.add("is-error"),e.closest("label").classList.remove("is-valid")))}))}),document.querySelectorAll(".form").forEach(e=>{e.addEventListener("submit",(function(t){e.querySelector(".is-error")&&t.preventDefault()}))}),document.querySelectorAll(".form textarea").forEach(e=>{e.addEventListener("input",(function(t){e.parentElement.dataset.value=e.value})),e.addEventListener("blur",(function(e){scrollSmoother&&(scrollSmoother.paused(!0),setTimeout(()=>{scrollSmoother.scrollTrigger.refresh(),scrollSmoother.paused(!1)},100))})),e.addEventListener("blur",(function(t){""!=e.value?e.closest("label").classList.add("is-valid"):e.closest("label").classList.remove("is-valid")}))}),document.querySelectorAll(".tel-input").forEach(e=>{const t=window.intlTelInput(e,{utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/12.0.3/js/utils.js",initialCountry:"auto",useFullscreenPopup:!1,geoIpLookup:function(e){fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(t){e(t.country_code)})).catch((function(){e("us")}))}});document.querySelectorAll(".iti__country-list").forEach(e=>{const t=new Lenis({wrapper:e});requestAnimationFrame((function e(r){t.raf(r),requestAnimationFrame(e)}))});const r=e.closest(".tel-input-label");e.addEventListener("focus",(function(e){r.classList.add("is-active")})),e.addEventListener("blur",(function(s){""==e.value&&r.classList.remove("is-active"),""!=e.value&&e.value!="+"+t.getSelectedCountryData().dialCode&&(t.isValidNumber()?(r.classList.remove("is-error"),""!=e.value&&r.classList.add("is-valid")):(r.classList.add("is-error"),r.classList.remove("is-valid")))})),e.addEventListener("countrychange",(function(){r.classList.add("is-active"),e.value="+"+t.getSelectedCountryData().dialCode}))});const lazyLoadInstance=new LazyLoad({callback_loaded:e=>{"VIDEO"==e.nodeName&&(e.autoplay=!0,e.play())}});