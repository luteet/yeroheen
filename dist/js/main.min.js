const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),headerNav=document.querySelector(".header__nav"),wrapper=document.querySelector(".wrapper"),header=document.querySelector(".header"),imageAspectRatio=document.querySelectorAll(".image-aspect-ratio, figure");imageAspectRatio.forEach(e=>{const t=e.querySelector("img"),r=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==r.position&&e.style.setProperty("--padding-aspect-ratio",Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")});const getDeviceType=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};let headerNavTimeout;body.addEventListener("click",(function(e){var t;t=".header__burger",e.target.closest(t)&&(menu.forEach(e=>{e.classList.toggle("is-mobile-menu-active")}),clearTimeout(headerNavTimeout),headerNav.style.setProperty("--transition","opacity .3s ease, visibility .3s ease"),headerNavTimeout=setTimeout(()=>{headerNav.style.removeProperty("--transition")},300))}));let windowSize,resizeCheck={};function resizeCheckFunc(e,t,r){windowSize<=e&&(1==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&0!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!1,r()),windowSize>=e&&(0==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&1!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!0,t())}let workStagesGallery=[];function resize(){windowSize=window.innerWidth,html.style.setProperty("--height-header",header.offsetHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}function validateEmail(e){return/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)}function validateName(e){return/\d/.test(e)}resize(),window.onresize=resize,document.querySelectorAll(".index-hero__background").forEach(e=>{const t=new Splide(e,{type:"fade",rewind:!0,arrows:!1,pagination:!1,drag:!1,easing:"ease",speed:700,interval:2e3,pauseOnHover:!1,autoplay:!0,updateOnMove:!0}),r=new Splide(e.closest("section").querySelector(".index-hero__title--word"),{direction:"ttb",height:"1.6ch",rewind:!0,arrows:!1,pagination:!1,drag:!1,easing:"ease",speed:700,interval:2e3,pauseOnHover:!1,autoplay:!0,updateOnMove:!0});t.on("mounted",(function(e){setTimeout(()=>{t.root.classList.add("is-init")},500)})),r.on("mounted",(function(e){setTimeout(()=>{r.root.parentElement.classList.add("is-init")},500)})),r.sync(t),r.mount(),t.mount()}),document.querySelectorAll(".work-stages__gallery").forEach(e=>{const t=e.closest("section").querySelector(".work-stages__list"),r=e.querySelector(".work-stages__gallery--number"),o=new Splide(e,{type:"fade",rewind:!0,autoplay:!0,arrows:!1,pagination:!1,drag:!1,interval:5e3,speed:1e3,easing:"ease",updateOnMove:!0});setTimeout(()=>{o.go(">")},5e3),o.on("mounted moved",(function(){t.querySelectorAll("button").forEach(e=>{e.classList.remove("is-active")});let e=o.index>=9?o.index:"0"+(o.index+1),s=o.length>=10?o.length:"0"+o.length;r.textContent=`${e} / ${s}`,t.querySelectorAll("button")[o.index].classList.add("is-active")})),t.querySelectorAll("button").forEach((e,t)=>{e.addEventListener("click",(function(e){o.go(t)})),e.addEventListener("pointerenter",(function(e){"desktop"==getDeviceType()&&o.go(t)}))}),o.mount()}),document.querySelectorAll(".work-stages__slider").forEach(e=>{new Splide(e,{gap:10,perPage:1,perMove:1,speed:300,easing:"ease",arrows:!1}).mount()}),document.querySelectorAll(".marquee__slider").forEach(e=>{new Splide(e,{type:"loop",autoWidth:!0,arrows:!1,pagination:!1,drag:!1,autoScroll:{pauseOnHover:!1}}).mount(window.splide.Extensions)}),ScrollTrigger.config({ignoreMobileResize:!0}),document.querySelectorAll(".split-text p").forEach(e=>{new SplitType(e,{types:"word, chars"})}),document.querySelectorAll(".split-text").forEach(e=>{let t=gsap.timeline({}).pause();t.to(e.querySelectorAll(".char"),{opacity:1,stagger:.05,duration:.5});ScrollTrigger.create({trigger:e.querySelectorAll(".char"),scrub:!0,start:"-300 center",end:e.closest("section").offsetHeight-100+"px bottom",onUpdate:({progress:e})=>{t.progress(e)}})}),document.querySelectorAll(".services__wrapper").forEach(e=>{let t=0;const r=e.querySelector(".services__list").querySelectorAll(".services__card"),o=e.parentElement.querySelector(".services__pagination");r.forEach(e=>{t+=e.offsetWidth,o.insertAdjacentHTML("beforeend",'<li class="services__pagination--dot"></li>')});const s=o.querySelectorAll(".services__pagination--dot");gsap.to(e.querySelector(".services__list"),{transform:`translate3d(-${e.scrollWidth-windowSize}px,0,0.0001px)`,ease:"none",scrollTrigger:{trigger:e.closest("section"),scrub:1,pin:!0,start:e.closest("section").offsetHeight+100+" bottom",end:t+" center",onUpdate:e=>{let t=!1;Object.keys(r).reverse().forEach(e=>{r[e].getBoundingClientRect().left<=150&&!t&&(t=!0,s.forEach(e=>{e.classList.remove("is-active")}),s[e].classList.add("is-active"))})}}})}),document.querySelectorAll(".video").forEach(e=>{const t=e.querySelector(".video__element"),r=e.querySelector(".video__wrapper");gsap.to(r,{width:"100%",onStart:function(){t.autoplay=!0,t.play()},scrollTrigger:{scrub:!0,start:e.offsetTop-window.innerHeight+" top",end:e.offsetTop+window.innerHeight+" bottom"}})}),Object.keys(document.querySelectorAll("[data-change-theme-to]")).reverse().forEach(e=>{let t=!1,r=document.querySelectorAll("[data-change-theme-to]")[e],o=gsap.timeline();o.from(body,{background:e-1==-1?"#0B0B0C":document.querySelectorAll("[data-change-theme-to]")[e-1].dataset.changeThemeTo}),o.to(body,{background:r.dataset.changeThemeTo}),o.pause(),ScrollTrigger.create({trigger:r,scrub:!0,start:"+200 bottom",end:"+1000 bottom",onUpdate:e=>{o.progress(e.progress),e.progress>=.3&&!t?(t=!0,"light"==r.dataset.changeThemeIs?(html.style.setProperty("--theme-color-1","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.add("is-reverse-theme")})):(html.style.setProperty("--theme-color-1","#FFF"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.remove("is-reverse-theme")}))):e.progress<.3&&t&&(t=!1,"light"==r.dataset.changeThemeIs?(html.style.setProperty("--theme-color-1","#FFF"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.remove("is-reverse-theme")})):(html.style.setProperty("--theme-color-1","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.add("is-reverse-theme")})))}})}),document.querySelectorAll(".form input").forEach(e=>{("first-name"==e.name||"last-name"==e.name&&"text"==e.type)&&e.addEventListener("blur",(function(t){validateName(e.value)?(e.closest("label").classList.add("is-error"),e.closest("label").classList.remove("is-valid")):(e.closest("label").classList.remove("is-error"),""!=e.value&&e.closest("label").classList.add("is-valid"))})),"email"==e.type&&e.addEventListener("blur",(function(t){validateEmail(e.value)?(e.closest("label").classList.remove("is-error"),""!=e.value&&e.closest("label").classList.add("is-valid")):(e.closest("label").classList.add("is-error"),e.closest("label").classList.remove("is-valid"))}))}),document.querySelectorAll(".form").forEach(e=>{e.addEventListener("submit",(function(t){e.querySelector(".is-error")&&t.preventDefault()}))}),document.querySelectorAll(".form textarea").forEach(e=>{e.addEventListener("input",(function(t){e.style.height=e.scrollHeight+"px"})),e.addEventListener("blur",(function(t){""!=e.value?e.closest("label").classList.add("is-valid"):e.closest("label").classList.remove("is-valid")}))}),document.querySelectorAll(".tel-input").forEach(e=>{const t=window.intlTelInput(e,{utilsScript:"libs.min.js",initialCountry:"auto",geoIpLookup:function(e){fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(t){e(t.country_code)})).catch((function(){e("us")}))}}),r=e.closest(".tel-input-label");e.addEventListener("focus",(function(e){r.classList.add("is-active")})),e.addEventListener("blur",(function(o){""==e.value&&r.classList.remove("is-active"),t.isValidNumber()?(r.classList.remove("is-error"),""!=e.value&&r.classList.add("is-valid")):(r.classList.add("is-error"),r.classList.remove("is-valid"))}))});const startButtons=document.querySelectorAll(".start-button");let scrollButtonCheck=!1;function scroll(){window.scrollY+body.offsetHeight>wrapper.offsetHeight-300&&!scrollButtonCheck?(scrollButtonCheck=!0,startButtons.forEach(e=>{e.classList.add("is-hidden")})):window.scrollY+body.offsetHeight<=wrapper.offsetHeight-300&&scrollButtonCheck&&(scrollButtonCheck=!1,startButtons.forEach(e=>{e.classList.remove("is-hidden")}))}scroll(),window.addEventListener("scroll",scroll);