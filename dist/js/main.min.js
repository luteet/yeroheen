const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger, .header__nav, body"),headerNav=document.querySelector(".header__nav"),wrapper=document.querySelector(".wrapper"),header=document.querySelector(".header");gsap.registerPlugin(ScrollTrigger,ScrollSmoother);const imageAspectRatio=document.querySelectorAll(".image-aspect-ratio, figure");imageAspectRatio.forEach(e=>{const t=e.querySelector("img"),o=getComputedStyle(e);t&&t.getAttribute("width")&&t.getAttribute("height")&&"relative"==o.position&&e.style.setProperty("--padding-aspect-ratio",Number(t.getAttribute("height"))/Number(t.getAttribute("width"))*100+"%")});const getDeviceType=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};let headerNavTimeout;body.addEventListener("click",(function(e){var t;t=".header__burger",e.target.closest(t)&&(menu.forEach(e=>{e.classList.toggle("is-mobile-menu-active")}),clearTimeout(headerNavTimeout),headerNav.style.setProperty("--transition","transform .3s ease"),headerNavTimeout=setTimeout(()=>{headerNav.style.removeProperty("--transition")},300))}));let windowSize,resizeCheck={};function resizeCheckFunc(e,t,o){windowSize<=e&&(1==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&0!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!1,o()),windowSize>=e&&(0==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&1!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!0,t())}let workStagesGallery=[];const telLabels=document.querySelectorAll(".tel-input-label");function resize(){windowSize=window.innerWidth,telLabels.forEach(e=>{e.style.setProperty("--width",e.offsetWidth+"px")}),html.style.setProperty("--height-header",header.offsetHeight+"px"),html.style.setProperty("--vh",.01*window.innerHeight+"px"),windowSize!=window.innerWidth&&html.style.setProperty("--svh",.01*window.innerHeight+"px"),windowSize=window.innerWidth}function getCoords(e){let t=e.getBoundingClientRect();return{top:t.top+window.scrollY,right:t.right+window.scrollX,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX}}resize(),window.onresize=resize,document.querySelectorAll(".index-hero__background").forEach(e=>{const t=e.querySelectorAll(".splide__slide"),o=new Splide(e,{type:"fade",rewind:!0,arrows:!1,pagination:!1,drag:!1,easing:"ease",speed:1700,interval:3e3,pauseOnHover:!1,autoplay:!0,updateOnMove:!0});o.on("moved",(function(){t[o.index].classList.remove("is-actived"),setTimeout(()=>{t[o.index].classList.add("is-actived")},0)}));const r=new Splide(e.closest("section").querySelector(".index-hero__title--word"),{type:"loop",direction:"ttb",height:"1.6ch",rewind:!0,arrows:!1,pagination:!1,drag:!1,easing:"ease",speed:700,interval:3e3,pauseOnHover:!1,autoplay:!0,updateOnMove:!0});o.on("mounted",(function(e){setTimeout(()=>{o.root.classList.add("is-init")},500)})),r.on("mounted",(function(e){setTimeout(()=>{r.root.parentElement.classList.add("is-init")},500)})),setTimeout(()=>{r.sync(o),r.mount(),o.mount()},0)}),document.querySelectorAll(".work-stages__gallery").forEach(e=>{const t=e.closest("section").querySelector(".work-stages__list"),o=t.querySelectorAll("button"),r=e.closest("section"),s=e.querySelector(".work-stages__gallery--number"),l=new Splide(e,{type:"fade",rewind:!0,autoplay:"pause",arrows:!1,pagination:!1,drag:!1,interval:5e3,speed:1500,easing:"ease",updateOnMove:!0});let i;let a;new IntersectionObserver((function(e){e.forEach(e=>{if(e.isIntersecting){clearTimeout(i),i=setTimeout(()=>{l.go(">")},5e3),clearInterval(a);let e=0;o[l.index].classList.add("is-active"),a=setInterval(()=>{o[l.index].style.setProperty("--value",Math.min(100,e++)+"%")},50)}else clearInterval(a),clearTimeout(i)})})).observe(r),l.on("moved",(function(){t.querySelectorAll("button").forEach(e=>{e.classList.remove("is-active")});let e=l.index>=9?l.index:"0"+(l.index+1),r=l.length>=10?l.length:"0"+l.length;s.textContent=`${e} / ${r}`,o[l.index].classList.add("is-active"),clearTimeout(i),i=setTimeout(()=>{l.go(">")},5e3),clearInterval(a);let n=0;a=setInterval(()=>{o[l.index].style.setProperty("--value",Math.min(100,n++)+"%")},50)})),l.on("mounted",(function(){t.querySelectorAll("button").forEach(e=>{e.classList.remove("is-active")});let e=l.index>=9?l.index:"0"+(l.index+1),o=l.length>=10?l.length:"0"+l.length;s.textContent=`${e} / ${o}`})),t.querySelectorAll("button").forEach((e,t)=>{e.addEventListener("click",(function(e){l.go(t)})),e.addEventListener("pointerenter",(function(e){"desktop"==getDeviceType()&&l.go(t)}))}),l.mount(window.splide.Extensions)}),document.querySelectorAll(".work-stages__slider").forEach(e=>{new Splide(e,{gap:10,perPage:1,perMove:1,speed:300,easing:"ease",arrows:!1}).mount()}),document.querySelectorAll(".marquee__slider").forEach(e=>{new Splide(e,{type:"loop",autoWidth:!0,arrows:!1,pagination:!1,drag:!1,autoScroll:{pauseOnHover:!1,speed:Math.max(windowSize/1200,1)}}).mount(window.splide.Extensions)}),document.querySelectorAll(".services__slider").forEach(e=>{new Splide(e,{perPage:2,perMove:1,speed:500,arrows:!1,breakpoints:{600:{perPage:1}}}).mount()});const startButtons=document.querySelectorAll(".start-button");let scrollSmoother,scrollButtonCheck=!1,headerOnTop=!1;const smoothContent=document.querySelector("#smooth-content");function scroll(){if(windowSize<=992&&!scrollSmoother){let e=Math.abs(smoothContent.getBoundingClientRect().top);e>100&&!headerOnTop?(headerOnTop=!0,header.classList.add("on-scroll")):e<=100&&headerOnTop&&(headerOnTop=!1,header.classList.remove("on-scroll")),window.scrollY+body.offsetHeight>wrapper.offsetHeight-300&&!scrollButtonCheck?(scrollButtonCheck=!0,startButtons.forEach(e=>{e.classList.add("is-hidden")})):window.scrollY+body.offsetHeight<wrapper.offsetHeight-300&&scrollButtonCheck&&(scrollButtonCheck=!1,startButtons.forEach(e=>{e.classList.remove("is-hidden")}))}}function headerScroll(e){let t,o,r=document.querySelector(".header"),s=getCoords(r),l=[!0,!0],i=!1,a=[0,0],n="";function c(){a[0]=s.top,s=getCoords(r),a[1]=s.top,i||(i=!0,t=s.top+300,o=s.top-50),a[0]>a[1]?n="up":a[0]<a[1]&&(n="down"),"down"==n&&(o=s.top-50),"up"==n&&(t=s.top+300),o>=s.top&&l[0]&&(l[0]=!1,l[1]=!0,r.classList.remove("is-hide")),t<=s.top&&l[1]&&(l[1]=!1,l[0]=!0,r.classList.add("is-hide"))}c(),window.addEventListener("scroll",c)}scroll(),window.addEventListener("scroll",scroll),headerScroll(),ScrollTrigger.config({ignoreMobileResize:!0}),document.querySelectorAll(".split-text p").forEach(e=>{new SplitType(e,{types:"word, chars"})}),document.querySelectorAll(".split-text").forEach(e=>{gsap.to(e.querySelectorAll(".char"),{opacity:1,stagger:.05,duration:1,scrollTrigger:{trigger:e.closest("section"),scrub:1,start:"+50% bottom",end:"bottom bottom"}})});const animMedia=gsap.matchMedia();animMedia.add("(min-width: 992px)",()=>{scrollSmoother=ScrollSmoother.create({smooth:1,effects:!0,onUpdate:function(){if(scrollSmoother){let e=Math.abs(smoothContent.getBoundingClientRect().top);e>100&&!headerOnTop?(headerOnTop=!0,header.classList.add("on-scroll")):e<=100&&headerOnTop&&(headerOnTop=!1,header.classList.remove("on-scroll")),scrollSmoother.progress>.95&&!scrollButtonCheck?(scrollButtonCheck=!0,startButtons.forEach(e=>{e.classList.add("is-hidden")})):scrollSmoother.progress<=.95&&scrollButtonCheck&&(scrollButtonCheck=!1,startButtons.forEach(e=>{e.classList.remove("is-hidden")}))}}}),document.querySelectorAll(".services__wrapper").forEach(e=>{let t=0;e.querySelector(".services__list").querySelectorAll(".services__card").forEach(e=>{t+=e.offsetWidth}),gsap.to(e.querySelector(".services__list"),{transform:`translate3d(-${e.scrollWidth-windowSize}px,0,0.0001px)`,ease:"none",scrollTrigger:{trigger:e.closest("section"),scrub:!0,pin:!0,start:e.closest("section").offsetHeight+100+" bottom",end:t+" center"}})})});const animElements=document.querySelectorAll("[data-animation]");function validateEmail(e){return/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(e)}function validateName(e){return/\d/.test(e)}animElements.forEach(e=>{if("split-fade-up"==e.dataset.animation){let t=new SplitType(e,{types:"lines"});Array.from(t.lines).forEach(e=>{e.innerHTML=`<div class="line-inner">${e.innerHTML}</div>`}),gsap.set(e.querySelectorAll(".line-inner"),{transform:"translate(0,100%)",opacity:0})}e.dataset.animationDelay&&e.style.setProperty("--delay",e.dataset.animationDelay+"s");const t=!!e.dataset.animationAnchor&&document.querySelector(e.dataset.animationAnchor),o=new IntersectionObserver((function(t){t.forEach(t=>{t.isIntersecting?(e.classList.add("is-animated"),"split-fade-up"==e.dataset.animation&&e.querySelector(".line")&&gsap.to(e.querySelectorAll(".line-inner"),{delay:e.dataset.animationDelay?Number(e.dataset.animationDelay):0,opacity:1,stagger:.25,transform:"translate(0,0)"})):(e.classList.remove("is-animated"),"split-fade-up"==e.dataset.animation&&e.querySelector(".line")&&gsap.set(e.querySelectorAll(".line-inner"),{transform:"translate(0,75%)",opacity:0}))})}));t?o.observe(t):o.observe(e)}),document.querySelectorAll(".video").forEach(e=>{const t=e.querySelector(".video__element"),o=e.querySelector(".video__wrapper");gsap.to(o,{width:"100%",onStart:function(){t.autoplay=!0,t.play()},scrollTrigger:{trigger:o,scrub:!0,start:"top bottom",end:"bottom bottom"}})}),Object.keys(document.querySelectorAll("[data-change-theme-to]")).reverse().forEach(e=>{let t,o,r=!1,s=document.querySelectorAll("[data-change-theme-to]")[e],l=gsap.timeline();l.from(body,{background:e-1==-1?"#0B0B0C":document.querySelectorAll("[data-change-theme-to]")[e-1].dataset.changeThemeTo}),"light"==s.dataset.changeThemeIs?(gsap.set(body,{"--theme-color-1":"#fff","--theme-color-1-reverse":"#171718"}),l.to(body,{background:s.dataset.changeThemeTo,"--theme-color-1":"#171718","--theme-color-1-reverse":"#fff"})):(gsap.set(body,{"--theme-color-1":"#171718","--theme-color-1-reverse":"#fff"}),l.to(body,{background:s.dataset.changeThemeTo,"--theme-color-1":"#fff","--theme-color-1-reverse":"#171718"})),l.pause(),s.hasAttribute("data-change-theme-on-top")?(t="+100 bottom",o="+500 bottom"):(t="+100 25%",o="+300 25%"),ScrollTrigger.create({trigger:s,scrub:!0,start:t,end:o,onUpdate:e=>{l.progress(e.progress),e.progress>=.3&&!r?(r=!0,"light"==s.dataset.changeThemeIs?(header.classList.add("is-light"),html.style.setProperty("--theme-color-2","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.add("is-reverse-theme")})):(header.classList.remove("is-light"),html.style.setProperty("--theme-color-2","#FFF"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.remove("is-reverse-theme")}))):e.progress<.3&&r&&(r=!1,"light"==s.dataset.changeThemeIs?(header.classList.remove("is-light"),html.style.setProperty("--theme-color-2","#FFF"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.remove("is-reverse-theme")})):(header.classList.add("is-light"),html.style.setProperty("--theme-color-2","#171718"),document.querySelectorAll(".start-button").forEach(e=>{e.classList.add("is-reverse-theme")})))}})}),document.querySelectorAll(".form input").forEach(e=>{("first-name"==e.name||"last-name"==e.name&&"text"==e.type)&&e.addEventListener("blur",(function(t){validateName(e.value)?(e.closest("label").classList.add("is-error"),e.closest("label").classList.remove("is-valid")):(e.closest("label").classList.remove("is-error"),""!=e.value&&e.closest("label").classList.add("is-valid"))})),"email"==e.type&&e.addEventListener("blur",(function(t){validateEmail(e.value)?(e.closest("label").classList.remove("is-error"),""!=e.value&&e.closest("label").classList.add("is-valid")):(e.closest("label").classList.add("is-error"),e.closest("label").classList.remove("is-valid"))}))}),document.querySelectorAll(".form").forEach(e=>{e.addEventListener("submit",(function(t){e.querySelector(".is-error")&&t.preventDefault()}))}),document.querySelectorAll(".form textarea").forEach(e=>{e.addEventListener("input",(function(t){e.style.height=e.scrollHeight+"px"})),e.addEventListener("blur",(function(t){""!=e.value?e.closest("label").classList.add("is-valid"):e.closest("label").classList.remove("is-valid")}))}),document.querySelectorAll(".tel-input").forEach(e=>{const t=window.intlTelInput(e,{utilsScript:"libs.min.js",initialCountry:"auto",useFullscreenPopup:!1,geoIpLookup:function(e){fetch("https://ipapi.co/json").then((function(e){return e.json()})).then((function(t){e(t.country_code)})).catch((function(){e("us")}))}}),o=e.closest(".tel-input-label");e.addEventListener("focus",(function(e){o.classList.add("is-active")})),e.addEventListener("blur",(function(r){""==e.value&&o.classList.remove("is-active"),t.isValidNumber()?(o.classList.remove("is-error"),""!=e.value&&o.classList.add("is-valid")):(o.classList.add("is-error"),o.classList.remove("is-valid"))})),e.addEventListener("countrychange",(function(){o.classList.add("is-active"),e.value="+"+t.getSelectedCountryData().dialCode}))});